<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.elbigs.mybatisMapper.CommonMapper">

    <select id="selectFileList" resultType="com.elbigs.entity.FileEntity">
         select *
           from files
          where 1 = 1
            and connectable_type = #{connectableType}
            and connectable_id = #{connectableId}
    </select>
    <delete id="deleteFiles">
        delete from files where connectable_type = #{connectableType} and connectable_id = #{connectableId} and file_number = #{fileNumber}
    </delete>
    <insert id="insertFiles">
        insert into public.files
        ( connectable_id, connectable_type, file_number, origin_name, convert_name, full_path, "size", "type", mime_type, created_at)
        values (#{connectableId}, #{connectableType}, #{fileNumber}, #{originName}, #{convertName}, #{fullPath}, #{size}, #{type}, #{mimeType}, now());
    </insert>
</mapper>
